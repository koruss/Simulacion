/*
Kenneth Corrales Lizano carnet 2017151342 
Alejandro Tapia Alvarez carnet 2017116952

La tabla va aqui

*/

clearoutput
newcmd aumentarCosto
end

newcmd calcularDias diasRestantes
	uniform 1 0 1 temp
	if temp < 0.30
		diasRestantes = 1
	elseif temp <0.70
		diasRestantes = 2 
	else 
		diasRestantes = 3
	end	
end

/*
bool = 1 significa que se anade una cantidad q 
bool = 0 solo se reduce 
*/ 
newcmd actualizarInventario Ini Final inventario  Venta bool dia q costoInventario costoPenalizacion
	
	poisson 1 7 ventaDia
	put ventaDia dia Venta
	inventario = inventario - ventaDia
	if inventario > 0
		costoInventario = costoInventario + inventario
	else
		tmp = -1 * inventario 
		costoPenalizacion = costoPenalizacion + tmp
	end
	put inventario dia Final
	temp2 = dia + 1
	if bool = 1
		if temp2 < 366
			inventario = inventario + q
			put inventario temp2 Ini
		end
	else
		if temp2 < 366
			put inventario temp2 Ini
		end
	end
end	
		 
		
		
		
	

newcmd calcularInventario q r Ini PedirQ Dias Venta Final N costoFijo costoInventario costoPenalizacion costoTotal
	

	inventario = q
	diasRestantes = 0
 
	copy Ini q Ini
	foreach dia N 
		if inventario < r ' Si queda poco inventario 
			put 1 dia PedirQ 'Se pide inventario
			
			if diasRestantes = 0
				costoFijo = costoFijo + 100	
				calcularDias diasRestantes 
				put diasRestantes dia dias
				if diasRestantes = 1
					actualizarInventario Ini Final inventario  Venta 1 dia q costoInventario costoPenalizacion
					diasRestantes = 0
				else
					actualizarInventario Ini Final inventario  Venta 0 dia q costoInventario costoPenalizacion
				end

			else
				diasRestantes = diasRestantes - 1
				put diasRestantes dia dias
				if diasRestantes = 1
					actualizarInventario Ini Final inventario  Venta 1 dia q costoInventario costoPenalizacion
					diasRestantes = 0

				else
					actualizarInventario Ini Final inventario  Venta 0 dia q costoInventario costoPenalizacion
				end
			end
		else
			
			put 0 dia PedirQ 
			put 0 dia Dias
			actualizarInventario Ini Final inventario  Venta 0 dia q costoInventario costoPenalizacion
		end
	end
	costoInventario = costoInventario * 20
	costoPenalizacion = costoPenalizacion * 50
	costoTotal = costoInventario + costoPenalizacion + costoFijo
end

/*
Programa Principal
*/



costoFijo = 0
costoInventario = 0
costoPenalizacion = 0
costoTotal = 0


Ini = ()
PedirQ = ()
Dias = ()
Venta = ()
Final = ()
copy 1,30 N

q = 50
r = 20
calcularInventario q r Ini PedirQ Dias Venta Final N costoFijo costoInventario costoPenalizacion costoTotal

print table N%8.0F Ini%8.0F PedirQ%8.0F Dias%8.0F Venta%8.0F Final%8.0F

print costoFijo
print costoInventario 
print costoPenalizacion
print costoTotal





